{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@askvortsov/flarum-pwa/webpack/bootstrap","webpack://@askvortsov/flarum-pwa/webpack/runtime/compat get default export","webpack://@askvortsov/flarum-pwa/webpack/runtime/define property getters","webpack://@askvortsov/flarum-pwa/webpack/runtime/hasOwnProperty shorthand","webpack://@askvortsov/flarum-pwa/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.reg.get('core', 'common/components/UploadImageButton')\"","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWALogoUploadButton.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWAUploadFirebaseConfigForm.js","webpack://@askvortsov/flarum-pwa/./src/admin/components/PWAPage.js","webpack://@askvortsov/flarum-pwa/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/UploadImageButton');","import UploadImageButton from 'flarum/common/components/UploadImageButton';\nexport default class PWALogoUploadButton extends UploadImageButton {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n    attrs.name = `pwa-icon-${attrs.size}x${attrs.size}`;\n  }\n  view(vnode) {\n    this.attrs.loading = this.loading;\n    this.attrs.className = (this.attrs.className || '') + ' Button';\n    if (app.data.settings['askvortsov-pwa.icon_' + this.attrs.size + '_path']) {\n      this.attrs.onclick = this.remove.bind(this);\n      this.attrs.value = app.data.settings['askvortsov-pwa.icon_' + this.attrs.size + '_path'];\n      this.attrs.url = app.forum.attribute(this.attrs.name + 'Url');\n    } else {\n      this.attrs.onclick = this.upload.bind(this);\n    }\n    return super.view({\n      ...vnode,\n      children: app.translator.trans('core.admin.upload_image.upload_buttonx')\n    });\n  }\n  remove() {\n    this.loading = true;\n    m.redraw();\n    app.request({\n      method: 'DELETE',\n      url: this.deleteUrl()\n    }).then(this.success.bind(this), this.failure.bind(this));\n  }\n  deleteUrl() {\n    return app.forum.attribute('apiUrl') + '/pwa-settings/logo/' + this.attrs.size;\n  }\n  resourceUrl() {\n    return app.forum.attribute('apiUrl') + '/pwa/logo/' + this.attrs.size;\n  }\n}\nflarum.reg.add('askvortsov-pwa', 'admin/components/PWALogoUploadButton', PWALogoUploadButton);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","import Component from 'flarum/common/Component';\nexport default class PWAUploadFirebaseConfigForm extends Component {\n  view(vnode) {\n    return m('[', null, m(\"form\", {\n      action: \"/pwa/firebase-config\",\n      method: \"POST\",\n      onsubmit: this.updateFirebaseConfig.bind(this)\n    }, m(\"fieldset\", null, m(\"fieldset\", null, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.firebase_config.heading')), m(\"div\", {\n      className: \"helpText\"\n    }, m(\"span\", null, app.translator.trans('askvortsov-pwa.admin.pwa.firebase_config.help_text')), m(\"a\", {\n      href: \"https://docs.pwabuilder.com/#/builder/app-store?id=push-notifications\",\n      target: \"_blank\"\n    }, app.translator.trans('askvortsov-pwa.admin.pwa.firebase_config.see_documentation_here'))), m(\"button\", {\n      type: \"button\",\n      className: \"Button\",\n      onclick: () => document.querySelector('#flarum-pwa-upload-button').click()\n    }, app.translator.trans('askvortsov-pwa.admin.pwa.firebase_config.upload_file')), m(\"input\", {\n      id: \"flarum-pwa-upload-button\",\n      type: \"file\",\n      onchange: this.updateFirebaseConfig.bind(this),\n      style: {\n        opacity: 0\n      }\n    })))));\n  }\n  updateFirebaseConfig(event) {\n    const body = new FormData();\n    body.append('file', event.target.files[0]);\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/pwa-settings/firebase-config',\n      body: body\n    }).then(response => {\n      app.alerts.show({\n        type: 'success'\n      }, app.translator.trans('askvortsov-pwa.admin.pwa.firebase_config.upload_successful'));\n    });\n  }\n}\nflarum.reg.add('askvortsov-pwa', 'admin/components/PWAUploadFirebaseConfigForm', PWAUploadFirebaseConfigForm);","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PWALogoUploadButton from './PWALogoUploadButton';\nimport PWAUploadFirebaseConfigForm from './PWAUploadFirebaseConfigForm';\nexport default class PWAPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.saving = false;\n    this.refresh();\n  }\n  refresh() {\n    this.loading = true;\n    this.status_messages = [];\n    this.manifest = {};\n    this.sizes = [];\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/pwa-settings'\n    }).then(response => {\n      this.manifest = response['data']['attributes']['manifest'];\n      this.sizes = response['data']['attributes']['sizes'];\n      this.status_messages = response['data']['attributes']['status_messages'];\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  checkExistence(url) {\n    let http = new XMLHttpRequest();\n    http.open('HEAD', url, false);\n    http.send();\n    return http.status != 404;\n  }\n  content() {\n    if (this.loading || this.saving) {\n      return m(\"div\", {\n        className: \"PWAPage\"\n      }, m(\"div\", {\n        className: \"container\"\n      }, m(LoadingIndicator, null)));\n    }\n    return m(\"div\", {\n      className: \"PWAPage\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"form\", null, m(\"h2\", null, app.translator.trans('askvortsov-pwa.admin.pwa.heading')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('askvortsov-pwa.admin.pwa.text')), m(\"div\", {\n      class: \"statusCheck\"\n    }, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.status_check_heading')), this.status_messages.map(message => m(Alert, {\n      type: message.type,\n      dismissible: false\n    }, [message.message]))), m(\"fieldset\", {\n      class: \"parent\"\n    }, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.heading')), this.buildSettingComponent({\n      setting: 'askvortsov-pwa.debug',\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.debug_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.debug_text'),\n      type: 'boolean'\n    }), this.buildSettingComponent(() => {\n      return m(\"div\", null, m(Button, {\n        className: \"Button\",\n        onclick: this.resetVapid.bind(this)\n      }, \"Reset VAPID keys\"), m(\"div\", {\n        className: \"helpText\"\n      }, app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.reset_vapid_text')));\n    })), m(\"fieldset\", {\n      class: \"parent\"\n    }, m(\"fieldset\", null, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.about.heading')), this.buildSettingComponent({\n      setting: 'askvortsov-pwa.shortName',\n      placeholder: this.setting('forum_title')(),\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.about.short_name_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.about.short_name_text'),\n      type: 'text'\n    })), m(\"fieldset\", null, this.buildSettingComponent({\n      setting: 'askvortsov-pwa.longName',\n      placeholder: this.setting('forum_title')(),\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.about.long_name_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.about.long_name_text'),\n      type: 'text'\n    })), m(\"fieldset\", null, m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('askvortsov-pwa.admin.pwa.about.description_text')), m(\"textarea\", {\n      className: \"FormControl\",\n      value: this.manifest.description,\n      disabled: true\n    }, this.manifest.description))), m(\"fieldset\", {\n      class: \"parent\"\n    }, m(\"fieldset\", null, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.colors.heading')), this.buildSettingComponent({\n      setting: 'askvortsov-pwa.themeColor',\n      placeholder: this.setting('theme_primary_color')(),\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.colors.theme_color_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.colors.theme_color_text'),\n      type: 'color-preview'\n    })), m(\"fieldset\", null, this.buildSettingComponent({\n      setting: 'askvortsov-pwa.backgroundColor',\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.colors.background_color_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.colors.background_color_text'),\n      type: 'color-preview'\n    }))), m(\"fieldset\", {\n      class: \"parent\"\n    }, m(\"fieldset\", null, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.other.heading')), this.buildSettingComponent({\n      setting: 'askvortsov-pwa.forcePortrait',\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.other.force_portrait_text'),\n      type: 'boolean'\n    })), m(\"fieldset\", null, this.buildSettingComponent({\n      setting: 'askvortsov-pwa.userMaxSubscriptions',\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.other.user_max_subscriptions_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.other.user_max_subscriptions_text'),\n      type: 'number',\n      placeholder: 20\n    })), m(\"fieldset\", null, this.buildSettingComponent({\n      setting: 'askvortsov-pwa.pushNotifPreferenceDefaultToEmail',\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.other.push_notif_preference_default_to_email_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.other.push_notif_preference_default_to_email_text'),\n      type: 'bool'\n    })), m(\"fieldset\", null, this.buildSettingComponent({\n      setting: 'askvortsov-pwa.windowControlsOverlay',\n      label: app.translator.trans('askvortsov-pwa.admin.pwa.other.window_controls_overlay_label'),\n      help: app.translator.trans('askvortsov-pwa.admin.pwa.other.window_controls_overlay_text', {\n        compatibilitylink: m(\"a\", {\n          href: \"https://caniuse.com/mdn-api_windowcontrolsoverlay\",\n          tabindex: \"-1\"\n        }),\n        learnlink: m(\"a\", {\n          href: \"https://learn.microsoft.com/en-us/microsoft-edge/progressive-web-apps-chromium/how-to/window-controls-overlay\",\n          tabindex: \"-1\"\n        })\n      }),\n      type: 'bool'\n    }))), this.submitButton(), m(\"fieldset\", null, m(\"legend\", null, app.translator.trans('askvortsov-pwa.admin.pwa.logo_heading')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('askvortsov-pwa.admin.pwa.logo_text')), this.sizes.map(size => {\n      return m(\"fieldset\", {\n        class: \"logoFieldset\"\n      }, m(PWALogoUploadButton, {\n        size: size\n      }), m(\"div\", {\n        className: \"helpText\"\n      }, app.translator.trans('askvortsov-pwa.admin.pwa.logo_size_text', {\n        size\n      })));\n    }))), m(PWAUploadFirebaseConfigForm, null)));\n  }\n  resetVapid() {\n    if (confirm(app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.reset_vapid_confirm'))) {\n      app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/pwa-settings/reset_vapid'\n      }).then(response => {\n        app.alerts.show({\n          type: 'success'\n        }, app.translator.trans('askvortsov-pwa.admin.pwa.maintenance.reset_vapid_success', {\n          count: response.deleted\n        }));\n      });\n    }\n  }\n  saveSettings(e) {\n    const hex = /^(#[0-9a-f]{3}([0-9a-f]{3})?)?$/i;\n    if (!hex.test(this.setting('askvortsov-pwa.backgroundColor')())) {\n      alert(app.translator.trans('core.admin.appearance.enter_hex_message'));\n      return;\n    }\n    return super.saveSettings(e);\n  }\n}\nflarum.reg.add('askvortsov-pwa', 'admin/components/PWAPage', PWAPage);","import PWAPage from './components/PWAPage';\napp.initializers.add('askvortsov/flarum-pwa', () => {\n  app.registry.for('askvortsov-pwa').registerPage(PWAPage);\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","PWALogoUploadButton","initAttrs","attrs","super","name","size","view","vnode","this","loading","className","app","data","settings","onclick","remove","bind","value","url","forum","attribute","upload","children","translator","trans","m","redraw","request","method","deleteUrl","then","success","failure","resourceUrl","add","PWAUploadFirebaseConfigForm","action","onsubmit","updateFirebaseConfig","href","target","type","document","querySelector","click","id","onchange","style","opacity","event","body","FormData","append","files","response","alerts","show","PWAPage","oninit","saving","refresh","status_messages","manifest","sizes","checkExistence","http","XMLHttpRequest","open","send","status","content","class","map","message","dismissible","buildSettingComponent","setting","label","help","resetVapid","placeholder","description","disabled","compatibilitylink","tabindex","learnlink","submitButton","confirm","count","deleted","saveSettings","e","test","alert","initializers","registry","for","registerPage"],"sourceRoot":""}